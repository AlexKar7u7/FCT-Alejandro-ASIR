{% load static %}
<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <link rel="stylesheet" href="{% static 'blog/static.css' %}">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css" rel="stylesheet">
  <title>{% block title %}Mi sitio{% endblock %}</title>
</head>

<body>
  <header>
    <nav>
      <!-- Men√∫ lado izquierdo -->
      <div class="nav-left">
        <a href="{% url 'inicio' %}">Inicio</a> |
        <a href="{% url 'lista_articulos' %}">Art√≠culos</a> |
        <a href="{% url 'nueva_peticion' %}">Solicitar Petici√≥n</a> |
        <a href="{% url 'lista_propuestas' %}">Lista Propuestas</a> |
        {% if user.is_authenticated %}
        Hola, {{ user.username }} |
        {% if user.is_staff %}
        <a href="/admin/">Ir al Admin</a>
        {% endif %}
        {% else %}
        <a href="{% url 'login' %}">Iniciar sesi√≥n</a>
        {% endif %}
      </div>

      <!-- Men√∫ lado derecho -->
      <div class="nav-right">
        {% if user.is_authenticated %}
        <form action="{% url 'logout' %}" method="post" style="display:inline;">
          {% csrf_token %}
          <button type="submit" class="nav-link">Cerrar sesi√≥n</button>
        </form>
        {% endif %}
        <button id="theme-toggle" class="btn btn-link nav-link">üåô Oscuro</button>
      </div>
    </nav>
  </header>

  <main>
    {% block content %}{% endblock %}
  </main>

  <footer>
    <p>&copy; 2025 Mi sitio web | <a href="#">Contacto</a> | <a href="#">Aviso legal</a></p>
  </footer>
  <script>
    (function () {
      const toggle = document.getElementById('theme-toggle');
      const body = document.body;

      function applyMode(mode) {
        if (mode === 'dark') {
          body.classList.add('dark-mode');
          toggle.textContent = '‚òÄÔ∏è Claro';
        } else {
          body.classList.remove('dark-mode');
          toggle.textContent = 'üåô Oscuro';
        }
      }

      // 1. Recuperar preferencia guardada
      const saved = localStorage.getItem('theme');
      if (saved) {
        applyMode(saved);
      }

      // 2. Cambiar al hacer clic
      toggle.addEventListener('click', () => {
        const isDark = body.classList.toggle('dark-mode');
        localStorage.setItem('theme', isDark ? 'dark' : 'light');
        applyMode(isDark ? 'dark' : 'light');
      });
    })();
  </script>

</body>

</html>